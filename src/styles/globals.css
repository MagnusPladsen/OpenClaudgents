@import "tailwindcss";
@import "./themes.css";

/* Base styles */
@layer base {
  html,
  body,
  #root {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }

  body {
    font-family: var(--font-sans);
    font-feature-settings: "cv02", "cv03", "cv04";
    background-color: var(--color-bg);
    color: var(--color-text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Mono font for code elements */
  code,
  pre,
  kbd,
  samp {
    font-family: var(--font-mono);
  }

  /* Smooth transitions on interactive elements */
  button,
  a,
  input,
  textarea,
  select {
    transition: all 150ms ease;
  }

  /* Refined scrollbar — thin, accent on hover */
  ::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: color-mix(in srgb, var(--color-text-muted) 30%, transparent);
    border-radius: 4px;
    transition: background 200ms ease;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: color-mix(in srgb, var(--color-accent) 50%, transparent);
  }

  /* Stable scrollbar gutter */
  .overflow-y-auto,
  .overflow-x-auto {
    scrollbar-gutter: stable;
  }
}

/* ─── Atmospheric textures ─── */

/* Dot-grid: engineering blueprint feel */
.dot-grid {
  background-image: radial-gradient(circle, var(--color-text-muted) 0.5px, transparent 0.5px);
  background-size: 24px 24px;
  opacity: 0.07;
}

/* Noise/grain overlay for depth */
.grain::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.015;
  pointer-events: none;
  mix-blend-mode: overlay;
}

/* ─── Glow utilities ─── */

.glow-accent {
  box-shadow: 0 0 20px color-mix(in srgb, var(--color-accent) 15%, transparent);
}

.glow-success {
  box-shadow: 0 0 20px color-mix(in srgb, var(--color-success) 15%, transparent);
}

.glow-border {
  position: relative;
}

.glow-border::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: conic-gradient(
    from var(--glow-angle, 0deg),
    var(--color-accent),
    var(--color-info),
    var(--color-accent)
  );
  opacity: 0.5;
  z-index: -1;
  animation: border-glow 4s linear infinite;
}

/* ─── Keyframes ─── */

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-up {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes shimmer {
  0% { opacity: 0.5; }
  50% { opacity: 1; }
  100% { opacity: 0.5; }
}

@keyframes scale-in {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes scale-in-spring {
  0% { opacity: 0; transform: scale(0.9); }
  70% { opacity: 1; transform: scale(1.02); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes wave {
  0%, 60%, 100% { transform: translateY(0); }
  30% { transform: translateY(-4px); }
}

@keyframes slide-up-drawer {
  0% { opacity: 0; transform: translateY(100%); }
  70% { opacity: 1; transform: translateY(-2%); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes stagger-in {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes border-glow {
  from { --glow-angle: 0deg; }
  to { --glow-angle: 360deg; }
}

@keyframes pulse-soft {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

@keyframes gradient-sweep {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes shimmer-slide {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes slide-in-left {
  from { opacity: 0; transform: translateX(-12px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slide-in-right {
  from { opacity: 0; transform: translateX(12px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes blur-in {
  from { opacity: 0; filter: blur(4px); }
  to { opacity: 1; filter: blur(0); }
}

@keyframes panel-open {
  from { opacity: 0; transform: translateX(20px) scale(0.98); }
  to { opacity: 1; transform: translateX(0) scale(1); }
}

/* Register custom property for animated gradients */
@property --glow-angle {
  syntax: "<angle>";
  inherits: false;
  initial-value: 0deg;
}

/* ─── Utility classes ─── */

@layer utilities {
  .animate-fade-in {
    animation: fade-in 200ms ease-out;
  }

  .animate-slide-up {
    animation: slide-up 250ms ease-out both;
  }

  .animate-shimmer {
    animation: shimmer 2s ease-in-out infinite;
  }

  .animate-scale-in {
    animation: scale-in 200ms ease-out;
  }

  .animate-scale-in-spring {
    animation: scale-in-spring 300ms ease-out;
  }

  .animate-slide-up-drawer {
    animation: slide-up-drawer 350ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .animate-wave {
    animation: wave 1.2s ease-in-out infinite;
  }

  .animate-stagger-in {
    animation: stagger-in 300ms ease-out both;
  }

  .animate-gradient-shift {
    background-size: 200% 200%;
    animation: gradient-shift 8s ease infinite;
  }

  .animate-border-glow {
    animation: border-glow 4s linear infinite;
  }

  .animate-pulse-soft {
    animation: pulse-soft 2s ease-in-out infinite;
  }

  .animate-gradient-sweep {
    background-size: 200% 100%;
    animation: gradient-sweep 2s linear infinite;
  }

  .animate-shimmer-slide {
    animation: shimmer-slide 1.5s ease-in-out infinite;
    background: linear-gradient(90deg, transparent, var(--color-accent), transparent);
    background-size: 200% 100%;
  }

  .animate-spin-slow {
    animation: spin-slow 8s linear infinite;
  }

  .animate-slide-in-left {
    animation: slide-in-left 300ms cubic-bezier(0.16, 1, 0.3, 1) both;
  }

  .animate-slide-in-right {
    animation: slide-in-right 300ms cubic-bezier(0.16, 1, 0.3, 1) both;
  }

  .animate-blur-in {
    animation: blur-in 400ms ease-out both;
  }

  .animate-panel-open {
    animation: panel-open 350ms cubic-bezier(0.16, 1, 0.3, 1) both;
  }
}
